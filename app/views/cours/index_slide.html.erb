<script type="text/javascript">    
    setInterval(function() {
        window.location.reload();
    }, <%= @cours.any? ? 0.2*60000 : 60*60000 %>); 
</script>

<nav class="navbar navbar-default navbar-fixed-bottom">
    <ul class="nav navbar-nav">
      <% if @cours.any? %>
        <p class="navbar-text">
          Màj: <%= l(DateTime.now) %>
          <% if @max_page_slide %> 
            | 
            Page <%= session[:page_slide] %> sur <%= @max_page_slide %>
          <% end %>
          |
          <%= @cours.count %> Cours au total
        </p>
      <% else %>
        <p class="navbar-text">
          Plus aucun cours à afficher pour aujourd'hui...
          Bonne soirée et à demain :)
        </p>
      <% end %>
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li><%= link_to '<<', cours_planning_path(planning_date:(@planning_date - 1.month)) %></li>
      <li><%= link_to '<', cours_planning_path(planning_date:(@planning_date - 1.day)) %></li>
    
      <p class="navbar-text"><%= l(@planning_date.to_date, format: :short) %></p>
    
      <li><%= link_to '>', cours_planning_path(planning_date:(@planning_date + 1.day)) %></li>
      <li><%= link_to '>>', cours_planning_path(planning_date:(@planning_date + 1.month)) %></li>
    </ul>
</nav> 

<% if @cours.any? %>
  <table class="table table-striped table-bordered">
    <% if @cours.any? %>
      <tfoot>
        <thead>
          <th>Heure</th>
          <th>Formation</th>
          <th>Intervenant</th>
          <th>Salle</th>
        </thead>
      </tfoot>
      <tbody>
        <% @cours.includes(:formation, :intervenant, :salle).each do | cours | %>
          <tr>
            <td>
              <h3><%= l(cours.debut, format: :heures_min) %></h3>
              <%= l(cours.fin, format: :heures_min) %>
            </td>
            <td>
              <h3><%= cours.formation.nom_promo %></h3>
              <h4><%= link_to cours.nom_ou_ue, cours %></h4>
              <% if cours.progress_bar_pct(@planning_date) > 0 %>
                <div class="progress">
                  <div class="progress-bar progress-bar-striped active" 
                       role="progressbar" aria-valuemin="0" aria-valuemax="100" 
                       style="width:<%= cours.progress_bar_pct(@planning_date) %>%">
                  </div>
                </div>
              <% end %>
            </td>
            <td style="vertical-align: middle;">
              <h3>
                <% if cours.intervenant.photo.url %>
                  <%= image_tag(cours.intervenant.photo.url, class: "img-circle", size:'80x80') %>
                <% end %>
                <%= cours.intervenant.nom_prenom %>
                <% if cours.intervenant_binome %>
                    / <%= cours.intervenant_binome.nom_prenom %>
                <% end %>
              </h3>
            </td>
            <td style="text-align: center;vertical-align: middle;">
              <% if cours.salle %>
                <h2>
                  <span class="label <%= cours.style %>">
                    <%= cours.salle.nom %>
                  </span>
                </h2>
              <% else %>
                <h3><i class="glyphicon glyphicon-warning-sign"></i></h3>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    <% end %>
  </table>
<% else %>
  <h1>
    <%= image_tag("http://www.bing.com/#{@image}", class:"img-thumbnail img-responsive") %>
  </h1>
<% end %>
<br><br>

