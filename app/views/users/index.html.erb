<div class="page-header">
  <%= link_to new_user_path, class: 'btn btn-primary' do %>
    <span class="glyphicon glyphicon-plus"></span>
    Utilisateur
  <% end %>
  <h1>Liste des utilisateurs</h1>
</div>

<div class='container-fluid'>
    <%= form_tag request.path, method: :get do %>
      <div class="row">
        <div class="form-group">
          <div class="col-sm-4">
            <%= label_tag "Nom/Prénom/Courriel" %>    
            <%= text_field_tag :search, params[:search], include_blank:true, onchange:'this.form.submit()', class:"form-control" %>
          </div>

          <div class="col-sm-5">
            <%= label_tag "Formation" %>    
            <div class="input-group">
              <%= select_tag :formation_id, 
                    options_from_collection_for_select(Formation.all, :id, :nom_promo, params[:formation_id]), include_blank:true, onchange:'this.form.submit()', class:"form-control" %>
              <span class="input-group-btn">
                <%= submit_tag 'Filtrer', class:"btn btn-success form-control" %>
              </span>
            </div>
          </div>

          <div class="col-sm-2">
            <%= label_tag :Administrateur, "Admin" %>
            <br>    
            <%= check_box_tag :admin, 1, params[:admin], onchange:'this.form.submit()', class:"form-control" %>
          </div>

        </div>
      </div>  
    <% end %>
</div>

<div class="table-responsive">
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>Nom</th>
        <th>Prénom</th>
        <th>Courriel</th>
        <th>Formation</th>
        <th>Administrateur ?</th>
        <th></th>
      </tr>
    </thead>

    <tfoot>
      <tr>
        <th /><th /><th /><th /><th /><th />
      </tr>
    </tfoot>

    <tbody>
      <%= content_tag_for(:tr, @users) do |user| %>
        <td><%= link_to user.nom, user %></td>
        <td><%= user.prénom %></td>
        <td><%= user.email %></td>
        <td><%= link_to user.formation.nom, user.formation if user.formation %></td>
        <td><%= user.admin? ? "Oui" : '' %></td>
        <td>
          <%= link_to edit_user_path(user), class: "btn btn-default" do %>
            <i class="glyphicon glyphicon-pencil"></i>
          <% end %>
          <%= link_to(user, method: :delete, data:{confirm: 'Confirmez-vous ?'}, class: "btn btn-default") do %>
            <i class="glyphicon glyphicon-remove"></i>
          <% end %>
        </td>
      <% end %>
    </tbody>
  </table>

  <div class="page_info">
    <%= page_entries_info @users %>
  </div>

  <%= will_paginate @users, renderer: BootstrapPagination::Rails %>
</div>
<br>

