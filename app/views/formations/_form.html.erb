<%= bootstrap_form_for(@formation) do |f| %>
  <% if @formation.errors.any? %>
    <div class="alert alert-danger alert-dismissable" role="alert">
      <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
  
      <h3><%= t('activerecord.errors.template.header',
                  model: Formation.model_name.human, count: @formation.errors.count) %></h3>

      <ul>
      <% @formation.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="form-group">
    <div class="row">
      <div class="col-sm-5">
        <%= f.text_field :nom %>

        <div class="row">
          <div class="col-sm-6">
            <%= f.text_field :abrg, label:'Abr.' %>
          </div>
          <div class="col-sm-6">
            <%= f.color_field :color, label:'Couleur' %>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-6">
            <%= f.check_box :hors_catalogue, label:"Hors catalogue ?" %>
          </div>
          <div class="col-sm-6">
            <%= f.check_box :archive, label:"Archivée ?" %>
          </div>
        </div>

        <%= f.text_field :promo %>
        <%= f.text_field :diplome, label:"Diplôme" %>
        <%= f.text_field :domaine %>
        <%= f.check_box :apprentissage, label:"Apprentissage ?" %>
        
      </div>

      <div class="col-sm-1">
      </div>

      <div class="col-sm-6">
        <%= f.collection_select :user_id, User.where.not(admin:true).order(:email), :id, :email, {include_blank: true, label:"Gestionnaire de formation"} %>
        <%= f.number_field :nbr_etudiants, label:"Nombre d'étudiants prévus" %>
        <%= f.number_field :nbr_heures, label:"Nombre d'heures prévues" %>

        <div class="row">
          <div class="col-sm-4">
            <%= f.text_field :Code_Analytique, label:"Code Analytique" %>
          </div>
          <div class="col-sm-4">
            <%= f.text_field :Taux_TD, label:"Taux TD" %>
          </div>
        </div>  

        <%= f.text_area :memo, label:"Mémo" %>
        <%= f.submit class: "btn btn-primary" %>     
      </div>
    </div>

  </div>

  <h4>
    <a href="#UE" data-toggle="collapse">Liste des UE</a>
    | 
    <a href="#Etudiants" data-toggle="collapse">Liste des étudiants</a>
  </h4>
  
  <div id="UE" class="collapse">
      <ul>
        <%= f.fields_for :unites do |ue| %>
          <div class="row">
            <li>
              <div class="col-sm-3">
                <%= ue.text_field :num, placeholder:"UE# ex:UE3", label:"Code" %>
              </div>  
              <div class="col-sm-7">
                <%= ue.text_field :nom %>
              </div>
              <div class="col-sm-2">
                <br>
                <%= ue.check_box :_destroy, label:"Supprimer ?" %>
              </div>
            </li> 
          </div>
        <% end %>
      </ul>
  </div>
  
  <div id="Etudiants" class="collapse">
      <ul>
        <%= f.fields_for :etudiants do |etudiant| %>
          <div class="row">
            <li>
              <div class="col-sm-2">
                <%= etudiant.text_field :nom %>
              </div>  
              <div class="col-sm-2">
                <%= etudiant.text_field :prénom %>
              </div>
              <div class="col-sm-4">
                <%= etudiant.text_field :email %>
              </div>
              <div class="col-sm-2">
                <%= etudiant.text_field :mobile %>
              </div>
              <div class="col-sm-2">
                <br>
                <%= etudiant.check_box :_destroy, label:"Supprimer ?" %>
              </div>
            </li> 
          </div>
        <% end %>
      </ul>
  </div>

<% end %>