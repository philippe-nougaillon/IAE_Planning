<div class="page-header">
  <h1>
  	<span class="glyphicon glyphicon-download-alt"></span>
  	Import des utilisateurs
  </h1>
</div>

<%= form_tag({action: "import_utilisateurs_do", method: :post}, multipart: true) do %>
  <div>
    <h3>Cette fonction permet l'importation des utilisateurs à partir d'un fichier CSV</h3>
    <ul>
        <li>Le fichier source peut avoir les colonnes suivantes: <b>email;nom;prénom;mobile</b></li>
        <li>Ce fichier doit être au format CSV, Encodage=iso-8859-1, Séparateur=Point-virgule, Noms colonnes=Première ligne</li>
    </ul>
    <b><i>Chaque nouvel utilisateur sera averti de la création de son compte par l'envoi d'un email contenant son mot de passe</i></b> 
  </div>
  <br>

  <div class="row">
    <div class="col-sm-4">
      <%= label_tag "Formation" %>    
      <%= select_tag :formation_id, 
              options_from_collection_for_select(Formation.all, :id, :nom_promo, params[:formation_id]), 
                  class:"form-control", include_blank:true %>
    </div>
  </div>

  <div class="field">
      <%= label :filename, "Fichier source" %>
      <%= file_field_tag 'upload', accept: 'text/csv' %>
    </div>
    <br>
    
    <div class="field">
      <b>Enregistrer les changements ?</b> <br>
      <%= label :save, "Oui", :value => "true" %>
      <%= radio_button_tag :save, true %>
      <%= label :save, "Non", :value => "false" %>
      <%= radio_button_tag :save, false, :checked => true %>
      <br><i>Choisissez 'Non' pour tester votre import car <b>il est irréversible !</b></i><br />
    </div>
    <br>
    
    <div class="actions">
      <%= submit_tag "Lancer l'import", class: "btn btn-primary"%>
    </div>

  </div>
<% end %>